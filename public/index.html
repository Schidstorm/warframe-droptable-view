<html>
    <head>
        <title>
            Warframe Droptable
        </title>
        <link rel="stylesheet" href="/ml/material.min.css">

        <style type="text/css">
            * {
                font-family: Arial, Helvetica, sans-serif;
            }

            .droptable-csv-list {
                display: inline-flex;
            }

            .droptable-csv-list a {
                margin: 5px;

                transition: 200ms all ease;
            }

            .droptable-csv-list a, .droptable-csv-list a:hover, .droptable-csv-list a:visited, .droptable-csv-list a:active {
                text-decoration: none;
            }

            .droptable-update-time {
                font-size: 0.8em;
                color: rgb(150, 150, 150);
            }

            .droptable-update-time span {
                margin-right: 5px;
            }
        </style>
    </head>
    <body>
        <header>
            <h1>
                Parsed parts of the warframe droptable.
            </h1>
        </header>
        
        <div id="droptable-csv-list" class="droptable-csv-list">

        </div>
        <div class="droptable-update-time">
            Last update: 
            <span id="droptable-update-date"></span>
            <span id="droptable-update-time"></span>
        </div>

        </div>

        <script>
            fetch('/data').then(res => {
                res.json().then(data => {
                    const container = document.getElementById('droptable-csv-list');
                    for(let link of data) {
                        const element = document.createElement('a');
                        element.href = '/data/' + link;
                        element.innerText = link;
                        element.setAttribute('download', link);
                        element.setAttribute('class', 'mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect');
                        container.appendChild(element);
                    }
                })
            })

            fetch('/time').then(res => {
                res.text().then(updateTimeString => {
                    const updateTime = new Date(updateTimeString);
                    document.getElementById('droptable-update-date').innerText = updateTime.toLocaleDateString();
                    document.getElementById('droptable-update-time').innerText = updateTime.toLocaleTimeString();
                })
            })
        </script>
    </body>
</html>