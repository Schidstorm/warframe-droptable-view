<html>
    <head>
        <title>
            Warframe Droptable
        </title>

        <style type="text/css">
            * {
                font-family: Arial, Helvetica, sans-serif;
            }

            .droptable-csv-list {
                display: inline-flex;
            }

            .droptable-csv-list a {
                display: flex;
                width: 100%;
                margin: 5px;
                font-size: 1.2em;
                padding: 5px;
                border: rgb(206, 206, 206) 1px solid;
                background-color: rgb(230, 230, 230);

                transition: 200ms all ease;
            }

            .droptable-csv-list a, .droptable-csv-list a:hover, .droptable-csv-list a:visited, .droptable-csv-list a:active {
                text-decoration: none;
                color: rgb(43, 43, 43);
            }

            .droptable-csv-list a:hover {
                background-color: rgb(206, 206, 206);
            }

            .droptable-update-time {
                font-size: 0.8em;
                color: rgb(150, 150, 150);
            }
        </style>
    </head>
    <body>
        <header>
            <h1>
                Parsed parts of the warframe droptable.
            </h1>
        </header>
        
        <div id="droptable-csv-list" class="droptable-csv-list">

        </div>
        <div class="droptable-update-time">
            Last update: 
            <span id="droptable-update-time" >
        </div>

        </span>

        <script>
            fetch('/data').then(res => {
                res.json().then(data => {
                    const container = document.getElementById('droptable-csv-list');
                    for(let link of data) {
                        const element = document.createElement('a');
                        element.href = '/data/' + link;
                        element.innerText = link;
                        element.setAttribute('download', link);
                        container.appendChild(element);
                    }
                })
            })

            fetch('/time').then(res => {
                res.text().then(updateTimeString => {
                    const updateTime = new Date(updateTimeString);
                    const timeString = updateTime.toLocaleDateString();
                    document.getElementById('droptable-update-time').innerText = timeString;
                })
            })
        </script>
    </body>
</html>